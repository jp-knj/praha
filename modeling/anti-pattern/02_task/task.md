# データベース設計のアンチパターンを学ぶ2

## 課題1
1. 値の検索時に、tag1id, tag2id, tag3idを取得しなければならず,複数の列から１つの値を検索する単純なタスクの構文は長くなります。
2. 値の追加と削除
   1. SQL文が複雑になる
      1. １列のみを更新対象にしても、競合エラーや更新の上書きが発生するため
      2. nullif関数を使わなければならない
3. 一意性の保証
   1. 複数の値に同じ値を格納したくない。
4. 増加する値の処理
   1. もし、列数が多くなった場合よりSQL文が複雑になる可能性がある。
      1. 追加される場合
         1. テーブル全体をロックしなければならない
         2. テーブル構造を変更する場合に、まず新規テーブルを定義し、既存テーブルからデータをコピーして最後に既存テーブルを削除する流れになる。
         3. このテーブルを使用するSQL文に対して、更新が必要になる。これは時間のかかる可能性がある。

## 課題2
entity "post" as post {
+id : varchar[PK]
}

entity "post_tag" as post_tag{
+id:number
--
*post_id: varchar[FK]
*tag_id: varchar[FK]
}

entity "tag" as tag {
+id: text[PK]
--
contents: text
}

post ||..o{ post_tag
tag ||..o{ post_tag

## 課題3
